<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link th:href="@{/css/style.css}" href="/css/style.css" rel="stylesheet" type="text/css" />
	<link th:rel="stylesheet" th:href="@{/webjars/bootstrap/4.0.0-2/css/bootstrap.min.css} "/>
</head>
	
	<div th:replace="fragments/header :: header">...</div>

	<div class="container">
		<div>
			<div>
				<span>Send Money</span>
				<a href="/profile">
					<button type="button" class="btn btn-primary" data-toggle="modal" th:href="@{/profile}">
					  Add Connection
					</button>
				</a>
				
			</div>
			<div>
			    <form th:if="${currentUserContacts != null}" th:action="@{/transfer/save}" th:object="${transferForm}" method="post" class="my-2 d-flex flex-column align-items-center">  
			      <div class="form-group">
			      	<label for="contact">Select a Connection:</label>
                    <select th:field="*{contactId}">
                         <option th:each="contact : ${currentUserContacts}"
                                 th:value="${contact.contactId}"
                                 th:utext="${contact.receiverAccount.accountName}">
                         </option>
                  	</select>
			      </div>
			      <div class="form-group">
			      	<label for="lastName">Description:</label>
		    	  	<input type="text" id="description" name="description" autofocus="autofocus"  th:field="*{description}" placeholder="Description"/> <br />      
                   </div>
                   <div class="form-group">
			      		<input type="number" class="form-control" id="amount" autocomplete="off" th:field="*{transferredAmount}"
                       min="0"/>
                    </div>
			      
			      <div class="form-group">
			      	  <input class="btn btn-primary" type="submit" value="Pay" />
			      </div>
			    </form>
		    </div>
		</div>
	
		<div>
			<span>My Transactions</span>
			<table class="table table-striped">
	                <thead style="background-color:#5CB95C; color:#ffffff">
	                    <tr>
	                        <th>Sender</th>
	                        <th>Receiver</th>
	                        <th>Description</th>
	                       	<th>Transferred Amount</th>
	                        <th>Paid Amount</th>
	                        <th>Date</th>
	                    </tr>
	                </thead>
	                <tbody>
	                    <tr th:each="transaction : ${transactions}">
	                        <td th:text="${transaction.contact.senderAccount.accountName}"></td>
	                        <td th:text="${transaction.contact.receiverAccount.accountName}"></td>
	                        <td th:text="${transaction.description}"></td>
	                        <td th:text="${transaction.transferredAmount}"></td>
	                        <td th:text="${transaction.paidAmount}"></td>
	                        <td th:text="${transaction.transactionDate}"></td>
	                    </tr>
	                </tbody>
	        </table>	
		</div>
	</div>

	
</html>